<!DOCTYPE html>
<html>
<head>
    <title>Supersearcher Launcher</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 20px;
        }

        #controls {
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-width: 600px;
        }

        input, button {
            padding: 8px;
            border-radius: 6px;
            font-size: 1rem;
        }

        input {
            width: 100%;
        }

        button {
            width: fit-content;
        }

        .row {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .row > * {
            flex: 1;
        }
    </style>
</head>
<body>
    <h2>Supersearcher Launcher</h2>

    <div id="controls">
        <div>
            <label for="customUrl">Inject a Custom URL into a new tab:</label>
            <input type="text" id="customUrl" placeholder="https://example.com" />
        </div>
        <div class="row">
            <button onclick="injectCustom()">Inject Custom Page</button>
            <button onclick="launchSupersearcher()">Launch Supersearcher</button>
        </div>
    </div>

    <script>
        function injectCustom() {
            const url = document.getElementById("customUrl").value.trim();
            if (!url || !/^https?:\/\//.test(url)) {
                alert("Please enter a valid full URL (starting with http:// or https://)");
                return;
            }

            const win = window.open("about:blank");

            if (!win) {
                alert("Popup blocked. Please allow popups and try again.");
                return;
            }

            win.document.open();
            win.document.write(`
<!DOCTYPE html>
<html>
<head>
    <title>Injected Page</title>
    <style>
        html, body {
            height: 100%;
            margin: 0;
        }
        iframe {
            border: none;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <iframe src="${url}" allowfullscreen></iframe>
</body>
</html>
            `);
            win.document.close();
        }

        function launchSupersearcher() {
            const win = window.open("about:blank");

            if (!win) {
                alert("Popup blocked. Please allow popups and try again.");
                return;
            }

            const htmlContent = `
<!DOCTYPE html>
<html>
<head>
    <title>Supersearcher Local</title>
    <base target="_parent">
    <style>
        html, body, #page {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: sans-serif;
        }
        center {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            padding: 10px;
        }
        iframe#frame {
            height: 95vh;
            width: 95vw;
            border: none;
            border-radius: 8px;
        }
        button, input {
            border-radius: 6px;
            padding: 6px;
            font-size: 1rem;
        }
        #searchfield {
            width: 50vw;
        }
        .button-bar {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
        }
    </style>
    <script>
        function fllscrn() {
            document.getElementById("page").requestFullscreen();
        }

        function search() {
            document.getElementById('frame').src = document.getElementById("searchfield").value;
        }

        function newWin() {
            const w = window.open();
            w.document.body.innerHTML = '<iframe allowfullscreen src="assets/wow.html" width="100%" height="100%" style="border:none;" id="frame">';
        }

        function toolsMenu() {
            var option = prompt("Select an option\\n1: Show info\\n2: Use local wow page");
            if (option == "1") {
                alert("Version info: Super Searcher 2.5\\nBundled WOW version: 2.5\\nBy default, the wow page comes from an online source which is dynamically updated.");
            } else if (option == "2") {
                document.getElementById('frame').src = 'assets/wow.html';
            } else {
                alert("Invalid option");
            }
        }
    <\/script>
</head>
<body>
    <div id="page">
        <center>
            <iframe allowfullscreen src="https://sugarylettuce49.github.io/SuperSearcher/wow.html" id="frame"></iframe>
            <div class="button-bar">
                <button onclick="document.getElementById('frame').src = 'https://sugarylettuce49.github.io/SuperSearcher/wow.html'">Home</button>
                <button onclick="toolsMenu()">Tools</button>
                <input type="text" id="searchfield" value="https://" />
                <button onclick="search()">Go</button>
                <button onclick="fllscrn()">Fullscreen Webpage</button>
            </div>
        </center>
    </div>
</body>
</html>
`;
            win.document.open();
            win.document.write(htmlContent);
            win.document.close();
        }
    </script>
</body>
</html>
